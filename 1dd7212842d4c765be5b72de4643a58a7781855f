{
  "comments": [
    {
      "key": {
        "uuid": "574645a8_17980309",
        "filename": "ci-scripts/container-push/roles/containers-promote/defaults/main.yml",
        "patchSetId": 17
      },
      "lineNbr": 8,
      "author": {
        "id": 192
      },
      "writtenOn": "2019-09-26T08:55:40Z",
      "side": 1,
      "message": "wondering if we want to make that another \"attribute\" for the source_registry.\n\n[EDIT]: so i see you\u0027re no longer using it here. I am using it at https://review.rdoproject.org/r/#/c/22002/54/ci-scripts/container-push/roles/containers-promote/tasks/manifest-push.yml@11 to check the list of containers? It\u0027s a very cheap method for checking why don\u0027t you want to use it?\n\nOK I see you\u0027re using manifest inspect... i think i can work with that instead of registry_api will rework it",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 12
      },
      "revId": "1dd7212842d4c765be5b72de4643a58a7781855f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d49eb770_9e76b80d",
        "filename": "ci-scripts/container-push/roles/containers-promote/tasks/main.yaml",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 192
      },
      "writtenOn": "2019-09-26T09:02:47Z",
      "side": 1,
      "message": "fails locally molecule test -s container-push    TASK [../../../../../container-push/roles/containers-promote : Generate list of containers to push] ***\n    fatal: [instance]: FAILED! \u003d\u003e changed\u003dtrue \n      cmd: |-\n        export DOCKER_CLI_EXPERIMENTAL\u003denabled\n        echo -n \u003e parsed_containers-centos-7-master.txt;\n        for image in $(curl -fk file:///tmp/release_url 2\u003e/dev/null | grep -o -P \u0027(?\u003c\u003dname_prefix).*(?\u003dname_suffix)\u0027 | sed \"s/[{}]//g\"); do\n        #for image in a b; do\n            echo -n \"Checking localhost:5000/tripleomaster/centos-binary-$image:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8 ... \";\n            if docker manifest inspect --insecure \"localhost:5000/tripleomaster/centos-binary-$image:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8\" \u0026\u003e/dev/null; then\n                echo $image \u003e\u003e parsed_containers-centos-7-master.txt;\n                echo \"OK\";\n            else\n                echo \"FAIL\";\n                echo \"ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d centos-binary-$image IS NOT BUILT! FIX THIS ASAP! \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\";\n            fi\n        done\n        # fail the script and exit with error if the container list is empty\n        if [ ! -s parsed_containers-centos-7-master.txt ]; then\n            echo \"FAIL\";\n            echo \"ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d container list is empty THIS IS A CRITICAL BUG in the container push playbook\";\n            exit 1\n        fi\n        echo \"base\" \u003e\u003e parsed_containers-centos-7-master.txt\n        echo \"openstack-base\" \u003e\u003e parsed_containers-centos-7-master.txt\n      delta: \u00270:00:00.032244\u0027\n      end: \u00272019-09-26 11:58:24.663911\u0027\n      msg: non-zero return code\n      rc: 1\n      start: \u00272019-09-26 11:58:24.631667\u0027\n      stderr: \u0027\u0027\n      stderr_lines: \u003comitted\u003e\n      stdout: |-\n        Checking localhost:5000/tripleomaster/centos-binary-base:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8 ... FAIL\n        ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d centos-binary-base IS NOT BUILT! FIX THIS ASAP! \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n        Checking localhost:5000/tripleomaster/centos-binary-openstack-base:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8 ... FAIL\n        ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d centos-binary-openstack-base IS NOT BUILT! FIX THIS ASAP! \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n        FAIL\n        ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d container list is empty THIS IS A CRITICAL BUG in the container push playbook\n      stdout_lines: \u003comitted\u003e",
      "revId": "1dd7212842d4c765be5b72de4643a58a7781855f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f93e5bd_73198f7c",
        "filename": "ci-scripts/infra-setup/roles/promoter/molecule/container-push/molecule.yml",
        "patchSetId": 17
      },
      "lineNbr": 36,
      "author": {
        "id": 192
      },
      "writtenOn": "2019-09-26T08:55:40Z",
      "side": 1,
      "message": "this prevents me from testing locally http://paste.openstack.org/raw/779420/",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 36,
        "endChar": 73
      },
      "revId": "1dd7212842d4c765be5b72de4643a58a7781855f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46b16ccf_6b8fd4b2",
        "filename": "ci-scripts/infra-setup/roles/promoter/molecule/container-push/molecule.yml",
        "patchSetId": 17
      },
      "lineNbr": 36,
      "author": {
        "id": 192
      },
      "writtenOn": "2019-09-26T09:02:47Z",
      "side": 1,
      "message": "i removed that and then i also had to pip install selinux but then it fails on the \n\n    TASK [../../../../../container-push/roles/containers-promote : Generate list of containers to push] ***\n    fatal: [instance]: FAILED! \u003d\u003e changed\u003dtrue \n      cmd: |-\n        export DOCKER_CLI_EXPERIMENTAL\u003denabled\n        echo -n \u003e parsed_containers-centos-7-master.txt;\n        for image in $(curl -fk file:///tmp/release_url 2\u003e/dev/null | grep -o -P \u0027(?\u003c\u003dname_prefix).*(?\u003dname_suffix)\u0027 | sed \"s/[{}]//g\"); do\n        #for image in a b; do\n            echo -n \"Checking localhost:5000/tripleomaster/centos-binary-$image:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8 ... \";\n            if docker manifest inspect --insecure \"localhost:5000/tripleomaster/centos-binary-$image:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8\" \u0026\u003e/dev/null; then\n                echo $image \u003e\u003e parsed_containers-centos-7-master.txt;\n                echo \"OK\";\n            else\n                echo \"FAIL\";\n                echo \"ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d centos-binary-$image IS NOT BUILT! FIX THIS ASAP! \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\";\n            fi\n        done\n        # fail the script and exit with error if the container list is empty\n        if [ ! -s parsed_containers-centos-7-master.txt ]; then\n            echo \"FAIL\";\n            echo \"ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d container list is empty THIS IS A CRITICAL BUG in the container push playbook\";\n            exit 1\n        fi\n        echo \"base\" \u003e\u003e parsed_containers-centos-7-master.txt\n        echo \"openstack-base\" \u003e\u003e parsed_containers-centos-7-master.txt\n      delta: \u00270:00:00.032244\u0027\n      end: \u00272019-09-26 11:58:24.663911\u0027\n      msg: non-zero return code\n      rc: 1\n      start: \u00272019-09-26 11:58:24.631667\u0027\n      stderr: \u0027\u0027\n      stderr_lines: \u003comitted\u003e\n      stdout: |-\n        Checking localhost:5000/tripleomaster/centos-binary-base:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8 ... FAIL\n        ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d centos-binary-base IS NOT BUILT! FIX THIS ASAP! \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n        Checking localhost:5000/tripleomaster/centos-binary-openstack-base:82a1e08b25e42f1e8ea99d7c9b6957bb06423a34_dae2ef8 ... FAIL\n        ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d centos-binary-openstack-base IS NOT BUILT! FIX THIS ASAP! \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n        FAIL\n        ERROR \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d container list is empty THIS IS A CRITICAL BUG in the container push playbook\n      stdout_lines: \u003comitted\u003e",
      "parentUuid": "6f93e5bd_73198f7c",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 36,
        "endChar": 73
      },
      "revId": "1dd7212842d4c765be5b72de4643a58a7781855f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    }
  ]
}