{
  "comments": [
    {
      "key": {
        "uuid": "1571634f_3039eaf8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 13,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-06-17T07:14:58Z",
      "side": 1,
      "message": "https://tree.taiga.io/project/tripleo-ci-board/task/1744",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3912342_58dba8d5",
        "filename": "ci-scripts/dlrnapi_promoter/promoter_defaults_experimental.yaml",
        "patchSetId": 6
      },
      "lineNbr": 15,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-06-17T07:14:58Z",
      "side": 1,
      "message": "i guess this is to do with yaml \u0027null\u0027 vs ansible \u0027None\u0027\n\nso None was not working here? Was it set to the string \u0027None\u0027 for example? \n\nHow about if you just leave the value empty?",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cab33b00_09ad4434",
        "filename": "ci-scripts/dlrnapi_promoter/promoter_defaults_experimental.yaml",
        "patchSetId": 6
      },
      "lineNbr": 15,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "yea, python parser converts null to None. I you specify None, it will be just a string. If you don\u0027t write anything, it\u0027s an empty string \"\"",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7dcf0c66_b4d39943",
        "filename": "ci-scripts/dlrnapi_promoter/promoter_integration_checks.py",
        "patchSetId": 6
      },
      "lineNbr": 153,
      "author": {
        "id": 371
      },
      "writtenOn": "2020-06-16T12:24:00Z",
      "side": 1,
      "message": "use of chdir in an anti-pattern as it can affect other tools. Please use a context manager approach to assure that cwd is restored when function exits.",
      "range": {
        "startLine": 153,
        "startChar": 8,
        "endLine": 153,
        "endChar": 29
      },
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "26f1e859_63dcd06b",
        "filename": "ci-scripts/dlrnapi_promoter/promoter_integration_checks.py",
        "patchSetId": 6
      },
      "lineNbr": 153,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "I deal exclusively with absolute paths. I don\u0027t fully remember why I had to use chdir here, but I vaguely remember having to change to another directory to allow teardown to be able to delete a certain directory. I can try to remove it and retest. Maybe it\u0027s not really needed",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5da5ac34_dd90d874",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-06-17T07:14:58Z",
      "side": 1,
      "message": "is it safe to assume that this IOError is only because the image didn\u0027t exist? I\u0027m referring to the log.error text on the next line",
      "range": {
        "startLine": 53,
        "startChar": 19,
        "endLine": 53,
        "endChar": 22
      },
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a808c32_94122135",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "http://docs.paramiko.org/en/stable/api/sftp.html doesn\u0027t specify what happens if another error (host dies, timeout) occurs when you\u0027re trying to access the dir. THe wors taht happens at this point is that we misidentify the reason. Bu I would need to simulate a connection error to understand better (I think it might raise a socket.error). Not easy.",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1fb11c30_5eba607c",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 168,
      "author": {
        "id": 371
      },
      "writtenOn": "2020-06-16T12:24:00Z",
      "side": 1,
      "message": "use \"qcow\", without capital, is a file format/extension. (or full caps if you want).",
      "range": {
        "startLine": 168,
        "startChar": 22,
        "endLine": 168,
        "endChar": 26
      },
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fad8a1b2_a3325e71",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 168,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "In this case identifies the overcloud image, but it doesn\u0027t really change for me. Either is good.",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03add73c_1c997dfb",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 174,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-06-17T07:14:58Z",
      "side": 1,
      "message": "as above... not sure if that will be confusing if the error is because of something else.\n\n\u0027unable to stat the directory _foo_\u0027 (giving full path for debug)",
      "range": {
        "startLine": 174,
        "startChar": 30,
        "endLine": 174,
        "endChar": 52
      },
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c83918e1_306ed947",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 174,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "As above, but in this case the documentation doesn\u0027t even specify the error, I tested the result by hand.Beside losing connection, what else do you imagine it would happen here ?",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a366589c_f8cca404",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 185,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-06-17T07:14:58Z",
      "side": 1,
      "message": "again... what if the error is actually during the removal operation, i don\u0027t know e.g. because of some permissions issue? The debug message may be confusing",
      "range": {
        "startLine": 185,
        "startChar": 32,
        "endLine": 185,
        "endChar": 52
      },
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "172b29fc_0a48b228",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 185,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "OH COME ON, GIVE ME A BREAK!! .... yeah, you\u0027re right, I\u0027ll put remove on another try.",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ab624a9_b6542fab",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 210,
      "author": {
        "id": 192
      },
      "writtenOn": "2020-06-17T07:14:58Z",
      "side": 1,
      "message": "am wondering how we can make this entire method more like an atomic operation. It isn\u0027t an easy/trivial thing (unless there are some python libraries that can help).\n\nIf any of these errors are encountered, can we restore the state to how it was previously?\ne.g. you remove the current hash successfully but then fail to create the link here for the new one (candidate_hash).",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9535dfac_668a42e9",
        "filename": "ci-scripts/dlrnapi_promoter/qcow_client.py",
        "patchSetId": 6
      },
      "lineNbr": 210,
      "author": {
        "id": 63
      },
      "writtenOn": "2020-06-17T09:44:05Z",
      "side": 1,
      "message": "As sftp doesn\u0027t natively support transactions, we would need to implement them myself. It\u0027s not impossible, it shouldn\u0027t even bee too difficult. I\u0027ll see if I can assemble something in a short time.",
      "revId": "25f7a5dc01599dc1ad55dd562653157167bdad65",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    }
  ]
}