{
  "comments": [
    {
      "key": {
        "uuid": "5a890539_a83759e2",
        "filename": "ci-scripts/tripleo-upstream/get-hash.sh",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 87
      },
      "writtenOn": "2017-09-03T11:15:00Z",
      "side": 1,
      "message": "I suggest to move it into a separate library and use trap EXIT to automatically deactivate venv.\n\n\n\nfunction activate_dlrnapi_venv() {\nif [ ! -d $WORKSPACE/dlrnapi_venv ]; then\n  virtualenv --system-site-packages $WORKSPACE/dlrnapi_venv\n  pip install dlrnapi_client shyaml\nfi\npip install dlrnapi_client shyaml\n}\n\nfunction deactivate_dlrnapi_venv {\n  [[ $VIRTUAL_ENV \u003d $WORKSPACE/dlrnapi_venv ]] \u0026\u0026 deactivate\n}\n\ntrap deactivate_dlrnapi_venv EXIT",
      "revId": "2ee5894864226e18e182a5282c945fd8b56ce666",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7",
      "unresolved": false
    }
  ]
}