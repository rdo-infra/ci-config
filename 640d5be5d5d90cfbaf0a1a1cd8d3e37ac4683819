{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "472f4858_6fa630f1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 749
      },
      "writtenOn": "2022-09-13T20:39:54Z",
      "side": 1,
      "message": "Looks ok, few notes",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "828f9aab_2e450cf8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 192
      },
      "writtenOn": "2022-09-14T06:58:54Z",
      "side": 1,
      "message": "another pass \nmainly lgtm/cant spot something to criticise but inline question/clarification please",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1afc9b0a_e5e154b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 671
      },
      "writtenOn": "2022-09-15T10:46:12Z",
      "side": 1,
      "message": "Code looks right but at this point I am not sure about WHY of this patch and how dividing into 2 separate functions will solve the DDOS issue. Going to review follow up patch next, will circle back on this later.",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f178e90_8c306993",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 739
      },
      "writtenOn": "2022-09-15T19:52:59Z",
      "side": 1,
      "message": "$ python3 ruck_rover.py --release master --distro centos-9 --aggregate_hash\u003dtripleo-ci-testing/c3/4c/c34ceaeb547793b3e1d57638ee2c4bff\n status\u003dYellow last_promotion\u003d2022-09-13 16:54:47\nHash_under_test\u003dhttps://trunk.rdoproject.org/api-centos9-master-uc/api/civotes_agg_detail.html?ref_hash\u003dc34ceaeb547793b3e1d57638ee2c4bff\n...\n\nlooks correct, works with and without aggregate_hash.\n\n$ python3 ruck_rover.py --release master --distro centos-9 --aggregate_hash\u003dtripleo-ci-testing/c3/4c/c34ceaeb547793b3e1d57638ee2c4bff --influx\njobs_result,job_type\u003dintegration,job_name\u003dperiodic-tripleo-centos-9-buildimage-ironic-python-agent-master,release\u003dmaster name\u003d\"current-tripleo\",test_hash\u003d\"770b33236810ddbb94a654b3125f99aa\",criteria\u003d\"True\",status\u003d\"9\",logs\u003d\"https://logserver.rdoproject.org/0e/0e7811e2038f9625c15f25973a13cc9bd98021dd/openstack-periodic-integration-main/periodic-tripleo-centos-9-buildimage-ironic-python-agent-master/5370d34/\",failure_reason\u003d\"N/A\",duration\u003d\"00 hr 23 mins 11 secs\",component\u003d\"None\",distro\u003d\"centos-9\"\n\nWhen using --influx, it is hardcoded to tripleo-ci-testing as Sandeep pointed out.\n\nLGTM, thanks",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d313edb_3bc2c6f6",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 535,
      "author": {
        "id": 192
      },
      "writtenOn": "2022-09-14T06:58:54Z",
      "side": 1,
      "message": "this is specifically what is being avoided now?\n\nbut I don\u0027t see how what you have here helps... or there will be followup to improve this query?\n\ni mean, this patch moves the influx querying (influx\u003dtrue) to its own function but it will still be called every ~30 mins per commit message. What will the improvement be",
      "range": {
        "startLine": 535,
        "startChar": 0,
        "endLine": 535,
        "endChar": 1
      },
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1034f998_adebc172",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 535,
      "author": {
        "id": 756
      },
      "writtenOn": "2022-09-14T13:51:37Z",
      "side": 1,
      "message": "Hi Marios,\nThere is a follow-up patch in the chain, which reduces number of queries: https://review.rdoproject.org/r/c/rdo-infra/ci-config/+/44889",
      "parentUuid": "5d313edb_3bc2c6f6",
      "range": {
        "startLine": 535,
        "startChar": 0,
        "endLine": 535,
        "endChar": 1
      },
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e46d17aa_6c5bf4ca",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 814,
      "author": {
        "id": 671
      },
      "writtenOn": "2022-09-15T10:46:12Z",
      "side": 1,
      "message": "not a blocker but may be add aggregate_hash in params too?\n\nimho.. it will be good to not hardcode this, tripleo-ci-testing is the default anyway @ https://review.rdoproject.org/r/c/rdo-infra/ci-config/+/44887/2/ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/ruck_rover.py#858 , this will allow us to generate influx data for previous hashes.",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "513cb049_38386645",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 814,
      "author": {
        "id": 739
      },
      "writtenOn": "2022-09-15T19:52:59Z",
      "side": 1,
      "message": "@dasm, please fix this in a follow up patch. Even if we don\u0027t use it, it is good to let those functions simetric.",
      "parentUuid": "e46d17aa_6c5bf4ca",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99f32eb9_948be3a4",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 829,
      "author": {
        "id": 749
      },
      "writtenOn": "2022-09-13T20:39:54Z",
      "side": 1,
      "message": "Could probably do without this component variable",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ecf7784_6d2b4639",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/tests/test_ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 661,
      "author": {
        "id": 749
      },
      "writtenOn": "2022-09-13T20:39:54Z",
      "side": 1,
      "message": "This leaves test_integration_promotion afaict. Would be good to duplicate this test with track_integration promotion to validate that use case.",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6dc8e7a_3b8b8caa",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/tests/test_ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 661,
      "author": {
        "id": 756
      },
      "writtenOn": "2022-09-13T20:50:23Z",
      "side": 1,
      "message": "Hi Rafael, thanks for pointing that out.\nWe\u0027re not using track_integration_promotion with influx. This test is a part of TestInfluxDBMeasurements class.\nI\u0027ve never wrote track_integration_promotion test for non-influx workflow, because we rely too much on autogenerated tables.\nI\u0027m slowly working towards smaller functions, so I hope I\u0027m gonna be able to prepare some unittests to cover non-influx scenario too.",
      "parentUuid": "1ecf7784_6d2b4639",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89f97700_eac3b1fa",
        "filename": "ci-scripts/infra-setup/roles/rrcockpit/files/telegraf_py3/tests/test_ruck_rover.py",
        "patchSetId": 2
      },
      "lineNbr": 661,
      "author": {
        "id": 749
      },
      "writtenOn": "2022-09-13T21:28:19Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d6dc8e7a_3b8b8caa",
      "revId": "640d5be5d5d90cfbaf0a1a1cd8d3e37ac4683819",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    }
  ]
}