{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7473599e_10726825",
        "filename": "playbooks/shellcheck_install.yml",
        "patchSetId": 35
      },
      "lineNbr": 2,
      "author": {
        "id": 671
      },
      "writtenOn": "2022-07-21T06:12:46Z",
      "side": 1,
      "message": "vm? Is this a host or group?\n\nWhere are we populating inventory for vm?",
      "range": {
        "startLine": 2,
        "startChar": 9,
        "endLine": 2,
        "endChar": 11
      },
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a1e603d3_e1ec165d",
        "filename": "playbooks/shellcheck_install.yml",
        "patchSetId": 35
      },
      "lineNbr": 2,
      "author": {
        "id": 673
      },
      "writtenOn": "2022-07-21T09:18:35Z",
      "side": 1,
      "message": "It should be all. Thanks. vm is my local vm. :)",
      "parentUuid": "7473599e_10726825",
      "range": {
        "startLine": 2,
        "startChar": 9,
        "endLine": 2,
        "endChar": 11
      },
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8ccbbde_ba479691",
        "filename": "playbooks/shellcheck_install.yml",
        "patchSetId": 35
      },
      "lineNbr": 3,
      "author": {
        "id": 671
      },
      "writtenOn": "2022-07-21T06:12:46Z",
      "side": 1,
      "message": "I don\u0027t see in the logs what is executed in this playbook?\n\nhttps://logserver.rdoproject.org/01/42701/35/check/tripleo-ci-shellcheck/e4764ac/job-output.txt\n\n~~\n2022-07-18 09:11:17.202014 | PRE-RUN START: [untrusted : review.rdoproject.org/rdo-infra/ci-config/playbooks/shellcheck_install.yml@master]\n2022-07-18 09:11:18.778793 | \n2022-07-18 09:11:18.778950 | PLAY [vm]\n2022-07-18 09:11:18.788358 | \n2022-07-18 09:11:18.788496 | PLAY RECAP\n2022-07-18 09:11:18.788530 | \n2022-07-18 09:11:19.056969 | PRE-RUN END RESULT_NORMAL: [untrusted : review.rdoproject.org/rdo-infra/ci-config/playbooks/shellcheck_install.yml@master]\n2022-07-18 09:11:19.065383 | RUN START: [untrusted : review.rdoproject.org/rdo-infra/ci-config/playbooks/shellcheck_run.yml@master]\n~~~",
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b1ac691_6e44fae6",
        "filename": "playbooks/shellcheck_install.yml",
        "patchSetId": 35
      },
      "lineNbr": 3,
      "author": {
        "id": 192
      },
      "writtenOn": "2022-07-21T07:19:04Z",
      "side": 1,
      "message": "i asked similar things earlier - thread there https://review.rdoproject.org/r/c/rdo-infra/ci-config/+/42701/21..35/playbooks/shellcheck_run.yml#b12 \n\nin the beginning there was no output at all... amol added a \u0027checking _filename_ \u0027 and you can see the logs at https://logserver.rdoproject.org/01/42701/35/check/tripleo-ci-shellcheck/e4764ac/logs/shellcheck_logs/shellcheck.log \nso we can at least see which files are being considered each time",
      "parentUuid": "a8ccbbde_ba479691",
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "285f07d1_4f9f8561",
        "filename": "playbooks/shellcheck_install.yml",
        "patchSetId": 35
      },
      "lineNbr": 3,
      "author": {
        "id": 673
      },
      "writtenOn": "2022-07-21T09:18:35Z",
      "side": 1,
      "message": "command output is getting suppressed because of extra arguments to the \u0027xargs\u0027 command. Removing those extra arguments so we can get exact output.",
      "parentUuid": "1b1ac691_6e44fae6",
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad2ea9bd_2343ad6d",
        "filename": "playbooks/shellcheck_run.yml",
        "patchSetId": 35
      },
      "lineNbr": 13,
      "author": {
        "id": 671
      },
      "writtenOn": "2022-07-21T06:12:46Z",
      "side": 1,
      "message": "For a test I removed #!/bin/bash from one of a file.\n\n~~~\n$ git diff\ndiff --git a/jenkins-v2/jobs/scripts/weirdo-collect-logs.sh b/jenkins-v2/jobs/scripts/weirdo-collect-logs.sh\nindex 3d2a3d01..321fab9d 100644\n--- a/jenkins-v2/jobs/scripts/weirdo-collect-logs.sh\n+++ b/jenkins-v2/jobs/scripts/weirdo-collect-logs.sh\n@@ -1,4 +1,3 @@\n-#!/bin/bash\n # shellcheck disable\u003dSC2164,SC2155,SC2102\n # weirdo-collect-logs.sh\n # A script to collect logs generated by a weirdo job\n~~~\n\n\nIf I run below command(error comes):-\n\n\n$ shellcheck ./jenkins-v2/jobs/scripts/weirdo-collect-logs.sh\n\nIn ./jenkins-v2/jobs/scripts/weirdo-collect-logs.sh line 1:\n# shellcheck disable\u003dSC2164,SC2155,SC2102\n^-- SC2148: Tips depend on target shell and yours is unknown. Add a shebang or a \u0027shell\u0027 directive.\n\nFor more information:\n  https://www.shellcheck.net/wiki/SC2148 -- Tips depend on target shell and y...\n\n\n\n\nIf I use the command which which we are using here:-\n\nNO error:-\n\n\n[sandeepyadav@localhost ci-config]$ find . -name \"*.sh\" -print0 | xargs -n 1 -0 -I % sh -c \u0027echo \"Checking: %\";\u0027 shellcheck \u003e /tmp/shellcheck.log 2\u003e\u00261\n\n[sandeepyadav@localhost ci-config]$ echo $?\n0\n\n[sandeepyadav@localhost ci-config]$ cat /tmp/shellcheck.log\nChecking: ./jenkins-v2/jobs/scripts/weirdo-collect-logs.sh\nChecking: ./jenkins-v2/jobs/scripts/tripleo-upstream-dlrn-report.sh\nChecking: ./jenkins-v2/jobs/scripts/tripleo-upstream-collect-logs.sh\nChecking: ./jenkins-v2/jobs/scripts/promote-repo-dlrnapi.sh\nChecking: ./jenkins-v2/jobs/scripts/promote-get-hash.sh\nChecking: ./jenkins-v2/jobs/scripts/export-success-true.sh\nChecking: ./jenkins-v2/jobs/scripts/export-success-false.sh\nChecking: ./jenkins-v2/jobs/scripts/dlrn-api-report.sh\nChecking: ./jenkins-v2/jobs/scripts/cico-node-get-to-ansible.sh\nChecking: ./jenkins-v2/jobs/scripts/cico-node-done-from-ansible.sh\nChecking: ./jenkins-v2/jobs/scripts/centos9-wallaby-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos9-master-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos8-wallaby-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos8-victoria-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos8-train-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos7-train-current-tripleo.sh\nChecking: ./ci-scripts/upgrade-ovb.sh\nChecking: ./ci-scripts/tripleo-upstream/get-hash.sh\nChecking: ./ci-scripts/tripleo-upstream/dlrnapi_venv.sh\nChecking: ./ci-scripts/promote-images.sh\nChecking: ./ci-scripts/infra-setup/tests/provision-only.sh\nChecking: ./ci-scripts/infra-setup/tests/nuke.sh\nChecking: ./ci-scripts/infra-setup/tests/full-run.sh\nChecking: ./ci-scripts/infra-setup/roles/rrcockpit/files/mariadb/run.sh\nChecking: ./ci-scripts/infra-setup/roles/rrcockpit/files/grafana/entrypoint.sh\nChecking: ./ci-scripts/infra-setup/roles/rrcockpit/files/development_script.sh\nChecking: ./ci-scripts/infra-cleanup/ovb-tenant-cleanup.sh\nChecking: ./ci-scripts/infra-cleanup/cleanup-servers.sh\nChecking: ./ci-scripts/infra-cleanup/cleanup-keys.sh\nChecking: ./ci-scripts/infra-cleanup/cleanup-failed-stacks.sh\nChecking: ./ci-scripts/dlrnapi_promoter/dlrn-promoter.sh\nChecking: ./ci-scripts/dlrnapi_promoter/deprecated-dlrn-promoter.sh\nChecking: ./ci-scripts/copy-containers/tag-quay.sh\nChecking: ./ci-scripts/copy-containers/copy-rdo.sh\nChecking: ./ci-scripts/copy-containers/copy-quay.sh\nChecking: ./ci-scripts/container-push/manual_push.sh\nChecking: ./ci-scripts/checkout-patches.sh\nChecking: ./ci-scripts/build-images.sh\n\nDoesn\u0027t look like this command is checking everything.\n\n\n\nInfact even if shellcheck is not installed, this command doesn\u0027t give any error:-\n\n\n[sandeepyadav@localhost ci-config]$ shellcheck\nbash: /usr/bin/shellcheck: No such file or directory\n[sandeepyadav@localhost ci-config]$ find . -name \"*.sh\" -print0 | xargs -n 1 -0 -I % sh -c \u0027echo \"Checking: %\";\u0027 shellcheck \u003e /tmp/shellcheck.log 2\u003e\u00261\n[sandeepyadav@localhost ci-config]$ echo $?\n0\n[sandeepyadav@localhost ci-config]$ cat /tmp/shellcheck.log\nChecking: ./jenkins-v2/jobs/scripts/weirdo-collect-logs.sh\nChecking: ./jenkins-v2/jobs/scripts/tripleo-upstream-dlrn-report.sh\nChecking: ./jenkins-v2/jobs/scripts/tripleo-upstream-collect-logs.sh\nChecking: ./jenkins-v2/jobs/scripts/promote-repo-dlrnapi.sh\nChecking: ./jenkins-v2/jobs/scripts/promote-get-hash.sh\nChecking: ./jenkins-v2/jobs/scripts/export-success-true.sh\nChecking: ./jenkins-v2/jobs/scripts/export-success-false.sh\nChecking: ./jenkins-v2/jobs/scripts/dlrn-api-report.sh\nChecking: ./jenkins-v2/jobs/scripts/cico-node-get-to-ansible.sh\nChecking: ./jenkins-v2/jobs/scripts/cico-node-done-from-ansible.sh\nChecking: ./jenkins-v2/jobs/scripts/centos9-wallaby-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos9-master-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos8-wallaby-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos8-victoria-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos8-train-current-tripleo.sh\nChecking: ./jenkins-v2/jobs/scripts/centos7-train-current-tripleo.sh\nChecking: ./ci-scripts/upgrade-ovb.sh\nChecking: ./ci-scripts/tripleo-upstream/get-hash.sh\nChecking: ./ci-scripts/tripleo-upstream/dlrnapi_venv.sh\nChecking: ./ci-scripts/promote-images.sh\nChecking: ./ci-scripts/infra-setup/tests/provision-only.sh\nChecking: ./ci-scripts/infra-setup/tests/nuke.sh\nChecking: ./ci-scripts/infra-setup/tests/full-run.sh\nChecking: ./ci-scripts/infra-setup/roles/rrcockpit/files/mariadb/run.sh\nChecking: ./ci-scripts/infra-setup/roles/rrcockpit/files/grafana/entrypoint.sh\nChecking: ./ci-scripts/infra-setup/roles/rrcockpit/files/development_script.sh\nChecking: ./ci-scripts/infra-cleanup/ovb-tenant-cleanup.sh\nChecking: ./ci-scripts/infra-cleanup/cleanup-servers.sh\nChecking: ./ci-scripts/infra-cleanup/cleanup-keys.sh\nChecking: ./ci-scripts/infra-cleanup/cleanup-failed-stacks.sh\nChecking: ./ci-scripts/dlrnapi_promoter/dlrn-promoter.sh\nChecking: ./ci-scripts/dlrnapi_promoter/deprecated-dlrn-promoter.sh\nChecking: ./ci-scripts/copy-containers/tag-quay.sh\nChecking: ./ci-scripts/copy-containers/copy-rdo.sh\nChecking: ./ci-scripts/copy-containers/copy-quay.sh\nChecking: ./ci-scripts/container-push/manual_push.sh\nChecking: ./ci-scripts/checkout-patches.sh\nChecking: ./ci-scripts/build-images.sh",
      "range": {
        "startLine": 13,
        "startChar": 12,
        "endLine": 13,
        "endChar": 146
      },
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "211c71ce_0a856856",
        "filename": "playbooks/shellcheck_run.yml",
        "patchSetId": 35
      },
      "lineNbr": 13,
      "author": {
        "id": 673
      },
      "writtenOn": "2022-07-21T09:18:35Z",
      "side": 1,
      "message": "Thanks for analysis. I\u0027ve removed extra args from xargs .",
      "parentUuid": "ad2ea9bd_2343ad6d",
      "range": {
        "startLine": 13,
        "startChar": 12,
        "endLine": 13,
        "endChar": 146
      },
      "revId": "71e2f2ec0a944833e82fc5f719953aaa53481025",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    }
  ]
}