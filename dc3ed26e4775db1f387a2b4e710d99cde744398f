{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ae987e9d_01af166a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 242
      },
      "writtenOn": "2022-10-04T20:16:20Z",
      "side": 1,
      "message": "untested",
      "revId": "dc3ed26e4775db1f387a2b4e710d99cde744398f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "85e20346_1fd6f9df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 756
      },
      "writtenOn": "2022-10-05T16:45:56Z",
      "side": 1,
      "message": "Looks promising, except failed tests.\nThanks",
      "revId": "dc3ed26e4775db1f387a2b4e710d99cde744398f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f56d573a_c39b525f",
        "filename": "ci-scripts/dlrnapi_promoter/logic.py",
        "patchSetId": 1
      },
      "lineNbr": 233,
      "author": {
        "id": 756
      },
      "writtenOn": "2022-10-05T16:45:56Z",
      "side": 1,
      "message": "This can be done with\n```\nalt_criteria \u003d self.config.promotions[target_label].get(\u0027alternative_criteria\u0027, {})\n```",
      "revId": "dc3ed26e4775db1f387a2b4e710d99cde744398f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "759391c1_e0e96fb1",
        "filename": "ci-scripts/dlrnapi_promoter/logic.py",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 756
      },
      "writtenOn": "2022-10-05T16:45:56Z",
      "side": 1,
      "message": "You can skip this line, and you can go straight to iterating over `missing_jobs_direct`. If `missing_jobs_direct` is empty, it won\u0027t execute this loop, and will continue.",
      "revId": "dc3ed26e4775db1f387a2b4e710d99cde744398f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36a676a8_6b2f33b2",
        "filename": "ci-scripts/dlrnapi_promoter/logic.py",
        "patchSetId": 1
      },
      "lineNbr": 253,
      "author": {
        "id": 111
      },
      "writtenOn": "2022-10-06T06:50:25Z",
      "side": 1,
      "message": "With current code, we are hitting this\n```\nTraceback (most recent call last):\n  File \"/home/chandankumar/Documents/code/review.rdoproject.org/ci-config/ci-scripts/dlrnapi_promoter/dlrnapi_promoter.py\", line 146, in \u003cmodule\u003e\n    main()\n  File \"/home/chandankumar/Documents/code/review.rdoproject.org/ci-config/ci-scripts/dlrnapi_promoter/dlrnapi_promoter.py\", line 138, in main\n    args.handler(promoter, args)\n  File \"/home/chandankumar/Documents/code/review.rdoproject.org/ci-config/ci-scripts/dlrnapi_promoter/dlrnapi_promoter.py\", line 22, in promote_all\n    promoter.promote_all()\n  File \"/home/chandankumar/Documents/code/review.rdoproject.org/ci-config/ci-scripts/dlrnapi_promoter/logic.py\", line 309, in promote_all\n    promoted_pair \u003d self.promote_label_to_label(candidate_label,\n  File \"/home/chandankumar/Documents/code/review.rdoproject.org/ci-config/ci-scripts/dlrnapi_promoter/logic.py\", line 253, in promote_label_to_label\n    if len(missing_jobs_direct) and alt_criteria is not None:\nUnboundLocalError: local variable \u0027alt_criteria\u0027 referenced before assignment\n\n```",
      "range": {
        "startLine": 253,
        "startChar": 11,
        "endLine": 253,
        "endChar": 69
      },
      "revId": "dc3ed26e4775db1f387a2b4e710d99cde744398f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17d28473_e7e1f40a",
        "filename": "ci-scripts/dlrnapi_promoter/logic.py",
        "patchSetId": 1
      },
      "lineNbr": 254,
      "author": {
        "id": 756
      },
      "writtenOn": "2022-10-05T16:45:56Z",
      "side": 1,
      "message": "We can make it more readable with:\n```\nfor missing_job_direct in missing_jobs_direct:\n    for alt_job in alt_criteria.get(missing_job_direct, []):\n        if alt_job in successful_jobs:\n            # NOTE: replace failed job with alternative, passing one.\n            required_jobs.remove(missing_job_direct)\n            required_jobs.add(alt_job)\n            break   \n```",
      "revId": "dc3ed26e4775db1f387a2b4e710d99cde744398f",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    }
  ]
}