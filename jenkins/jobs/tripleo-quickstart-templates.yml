- job-template:
    name: 'tripleo-quickstart-promote-{release}-{build_system}-{topology}'
    defaults: 'tripleo-quickstart-defaults'
    scm:
        - repo-tripleo-quickstart
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'

- job-template:
    name: 'tripleo-quickstart-promote-{release}-{build_system}-build-images'
    defaults: 'tripleo-quickstart-defaults'
    scm:
        - repo-tripleo-quickstart
        - repo-ansible-role-tripleo-image-build
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'

- job-template:
    name: 'tripleo-quickstart-gate-{release}-{build_system}-quick-{test}'
    defaults: 'tripleo-quickstart-defaults'
    concurrent: true
    triggers:
        - trigger-tripleo-quickstart-gate-quick
    scm:
        - repo-tripleo-quickstart-gerrit
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'

- job-template:
    name: 'tripleo-quickstart-roles-gate-{release}'
    defaults: 'tripleo-quickstart-defaults'
    concurrent: true
    triggers:
        - trigger-tripleo-quickstart-gate-quick
        - trigger-gate-roles
    scm:
        - repo-tripleo-quickstart
        - repo-ansible-role-tripleo-gate
    builders:
        - tripleo-quickstart-builder:
            extra_setup: |
                sed -i \"s|git+https://github.com/redhat-openstack/ansible-role-tripleo-gate.git#egg=ansible-role-tripleo-gate|file://$WORKSPACE/ansible-role-tripleo-gate/#egg=ansible-role-tripleo-gate|\" quickstart-role-requirements.txt
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'

- job-template:
    name: 'tripleo-quickstart-gate-{release}-{build_system}-full-{topology}'
    defaults: 'tripleo-quickstart-defaults'
    triggers:
        - trigger-tripleo-quickstart-gate-full
    scm:
        - repo-tripleo-quickstart-gerrit
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'

- job-template:
    name: 'artib-gate-{release}-{build_system}-full-images'
    defaults: 'tripleo-quickstart-defaults'
    triggers:
        - trigger-artib-gate
    scm:
        - repo-tripleo-quickstart
        - repo-ansible-role-tripleo-image-build-gerrit
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'

- job-template:
    name: 'tripleo-quickstart-gate-{release}-{build_system}-full-images'
    defaults: 'tripleo-quickstart-defaults'
    triggers:
        - trigger-tripleo-quickstart-gate-build-images
    scm:
        - repo-tripleo-quickstart-gerrit
        - repo-ansible-role-tripleo-image-build
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'

- job-template:
    name: 'tripleo-quickstart-periodic-{release}-{build_system}-{test}-{topology}'
    defaults: 'tripleo-quickstart-defaults'
    triggers:
        - trigger-tripleo-quickstart-periodic
    scm:
        - repo-tripleo-quickstart
        - repo-ansible-role-tripleo-image-build
    builders:
        - tripleo-quickstart-builder:
            test: '{test}'
            job_type: '{job_type}'
            release: '{release}'
            build_system: '{build_system}'
            topology: '{topology}'
            extra_setup: '{extra_setup}'
