- defaults:
    name: 'weirdo-defaults'
    description: |
        Managed by Jenkins Job Builder. Do not edit via web.
    concurrent: false
    node: 'rdo'
    logrotate:
        daysToKeep: 31
        artifactDaysToKeep: 31
    publishers:
        - weirdo-email-cores
        - weirdo-archive-logs
    wrappers:
        - ansicolor
        - timestamps
        - workspace-cleanup
        - timeout:
            type: absolute
            timeout: 120
            fail: true

- defaults:
    name: 'weirdo-promote-defaults'
    description: |
        Managed by Jenkins Job Builder. Do not edit via web.
    concurrent: false
    node: 'rdo-promote'
    logrotate:
        daysToKeep: 31
        artifactDaysToKeep: 31
    publishers:
        - weirdo-email-cores
        - weirdo-archive-logs
    wrappers:
        - ansicolor
        - timestamps
        - workspace-cleanup
        - timeout:
            type: absolute
            timeout: 120
            fail: true

- publisher:
    name: 'weirdo-email-cores'
    publishers:
        - email:
            recipients: 'dms@redhat.com'

- publisher:
    name: 'weirdo-archive-logs'
    publishers:
        - archive:
            artifacts: 'properties,logs.html,**/*.sqlite'
            allow-empty: true

# "Building remotely" should always be in the build console output
- publisher:
    name: 'weirdo-release-node'
    publishers:
        - post-tasks:
            - matches:
                - log-text: Building remotely
              script:
                !include-raw:
                    - scripts/weirdo-vars.sh
                    - scripts/weirdo-collect-logs.sh
                    - scripts/cico-node-done-from-ansible.sh
