---
- hosts: instance
  tasks:
    - name: install development tools
      become: yes
      yum:
        name: '@Development tools'
        state: present

    - name: Ensure promoter user exists
      become: true
      user:
        name: "{{ promoter_user }}"
        system: true
        create_home: true

    - name: Ensure credentials are created
      become: true
      become_user: "{{ promoter_user }}"
      include_role: _ensure_credentials
      vars:
        registry_secret_path: "{{ remote_path_registry_secret }}"
        dlrnapi_secret_path: "{{ remote_path_dlrnapi_secret }}"
        uploader_key_path: "{{ remote_path_uploader_key }}"
